{"ast":null,"code":"var _jsxFileName = \"D:\\\\Document\\\\test\\\\project-note\\\\src\\\\components\\\\Note\\\\Task\\\\index.js\",\n  _s = $RefreshSig$();\n// import { data } from \"../Data/TodoListData\"\nimport \"./Task.css\";\nimport AddTask from '../../Control/AddTask';\nimport { format } from 'date-fns';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { calculateElapsedTime, calculateRateProcess } from '../../Control/Function/ComputeTime';\nimport Detail from '../../Modal/Detail/Detail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Task() {\n  _s();\n  const [todoList, setTodoList] = useState([]);\n  const [ShowDetail, setShowDetail] = useState(false);\n  const handleDetail = () => {\n    setShowDetail(true);\n  };\n  useEffect(() => {\n    // Gọi API lấy danh sách to-do\n    axios.get('http://localhost:3006').then(response => {\n      setTodoList(response.data);\n      console.log(response.data);\n      // Tính th��i gian chưa hoàn thành và t�� lệ hoàn thành cho m��i item\n      setTodoList(response.data.map(todoList => ({\n        ...todoList,\n        actual_duration: calculateElapsedTime(todoList),\n        rate_prosess: calculateRateProcess(todoList)\n      })));\n    }).catch(error => console.error(\"Lỗi khi tải dữ liệu:\", error));\n  }, []);\n  useEffect(() => {\n    console.log('todoList updated:', todoList);\n  }, [todoList]);\n  const handleAddItem = async newItem => {\n    console.log('new item', newItem);\n    axios.post('http://localhost:3006', newItem).then(response => {\n      console.log(response.data);\n      // setTodoList([...todoList, newItem]);\n\n      // Dòng này sử dụng giá trị hiện tại của todoList (trước khi cập nhật) để thêm newItem vào cuối danh sách.\n      // Tuy nhiên, vì setState trong React là bất đồng bộ, nên khi gọi setTodoList, giá trị todoList có thể chưa được cập nhật ngay lập tức, dẫn đến việc sử dụng todoList cũ nếu có thay đổi trong trạng thái trước đó.\n      // setTodoList(prevTodoList => [...prevTodoList, {...newItem, actual_duration: calculateElapsedTime(newItem)}]);:\n\n      // Dòng này sử dụng hàm callback để lấy giá trị cập nhật mới nhất của todoList (thông qua prevTodoList).\n      // Việc này đảm bảo bạn luôn làm việc với giá trị todoList mới nhất, tránh trường hợp xảy ra lỗi do cập nhật bất đồng bộ.\n      setTodoList(prevTodoList => [...prevTodoList, {\n        ...newItem,\n        actual_duration: calculateElapsedTime(newItem)\n      }]);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"note\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-container\",\n      children: /*#__PURE__*/_jsxDEV(AddTask, {\n        handleItem: handleAddItem,\n        todoList: todoList,\n        setTodoList: setTodoList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), todoList.map(task => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-item\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        className: \"task-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"task-title\",\n          children: [\" Title: \", task.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-process\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"task-status completed\",\n              children: [\" \", task.status ? \"Completed\" : \"In Progress\", \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"task-description\",\n            children: [\"Description: \", task.content]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-time\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-due\",\n          children: [\"Due:\", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"task-due-date\",\n            style: {\n              fontSize: '1rem',\n              fontWeight: '500'\n            },\n            children: format(new Date(task.due_date), 'dd MMMM yyyy HH:mm')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"task-duration\",\n          children: [\"Th\\u1EDDi gian \\u0111\\xE3 th\\u1EF1c hi\\u1EC7n: \", task.actual_duration, \"h \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this), \"(\", ShowDetail, \" ? \", /*#__PURE__*/_jsxDEV(Detail, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 41\n        }, this), \" : (\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDetail,\n          className: \"task-detail\",\n          children: \"Detail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 55\n        }, this), \"))\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this)]\n    }, task.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n_s(Task, \"v1/XZDk5rQ+tdXJe+4601aZu6ZQ=\");\n_c = Task;\nexport default Task;\nvar _c;\n$RefreshReg$(_c, \"Task\");","map":{"version":3,"names":["AddTask","format","React","useState","useEffect","axios","calculateElapsedTime","calculateRateProcess","Detail","jsxDEV","_jsxDEV","Task","_s","todoList","setTodoList","ShowDetail","setShowDetail","handleDetail","get","then","response","data","console","log","map","actual_duration","rate_prosess","catch","error","handleAddItem","newItem","post","prevTodoList","className","children","handleItem","fileName","_jsxFileName","lineNumber","columnNumber","task","style","width","height","title","status","content","fontSize","fontWeight","Date","due_date","onClick","id","_c","$RefreshReg$"],"sources":["D:/Document/test/project-note/src/components/Note/Task/index.js"],"sourcesContent":["// import { data } from \"../Data/TodoListData\"\r\nimport \"./Task.css\";\r\nimport AddTask from '../../Control/AddTask';\r\nimport { format } from 'date-fns';\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {calculateElapsedTime, calculateRateProcess} from '../../Control/Function/ComputeTime';\r\nimport Detail from '../../Modal/Detail/Detail';\r\n\r\nfunction Task() {\r\n    const [todoList, setTodoList] = useState([]);\r\n    const [ShowDetail, setShowDetail] = useState(false);\r\n\r\n    const handleDetail = () => {setShowDetail(true)}\r\n\r\n\r\n    useEffect(() => {\r\n    // Gọi API lấy danh sách to-do\r\n    axios.get('http://localhost:3006')\r\n        .then(response => {\r\n            setTodoList(response.data);\r\n            console.log(response.data)\r\n            // Tính th��i gian chưa hoàn thành và t�� lệ hoàn thành cho m��i item\r\n            setTodoList(response.data.map(todoList => ({\r\n                    ...todoList,\r\n                    actual_duration: calculateElapsedTime(todoList),\r\n                    rate_prosess: calculateRateProcess(todoList),\r\n            })));\r\n        })\r\n        .catch(error => console.error(\"Lỗi khi tải dữ liệu:\", error));\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        console.log('todoList updated:', todoList);\r\n    }, [todoList]);\r\n\r\n\r\n\r\n    const handleAddItem = async (newItem) => {\r\n        console.log('new item', newItem)\r\n\r\n        axios.post('http://localhost:3006', newItem)\r\n            .then(response => {\r\n                console.log(response.data);\r\n                // setTodoList([...todoList, newItem]);\r\n\r\n// Dòng này sử dụng giá trị hiện tại của todoList (trước khi cập nhật) để thêm newItem vào cuối danh sách.\r\n// Tuy nhiên, vì setState trong React là bất đồng bộ, nên khi gọi setTodoList, giá trị todoList có thể chưa được cập nhật ngay lập tức, dẫn đến việc sử dụng todoList cũ nếu có thay đổi trong trạng thái trước đó.\r\n// setTodoList(prevTodoList => [...prevTodoList, {...newItem, actual_duration: calculateElapsedTime(newItem)}]);:\r\n\r\n// Dòng này sử dụng hàm callback để lấy giá trị cập nhật mới nhất của todoList (thông qua prevTodoList).\r\n// Việc này đảm bảo bạn luôn làm việc với giá trị todoList mới nhất, tránh trường hợp xảy ra lỗi do cập nhật bất đồng bộ.\r\n                setTodoList(prevTodoList => [...prevTodoList, {...newItem, actual_duration: calculateElapsedTime(newItem)}]);\r\n            })\r\n        \r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"note\">\r\n            <div className=\"note-container\">\r\n                {/* <AddTodoItem onAddItem={handleAddItem} />  */}\r\n                <AddTask handleItem={handleAddItem} todoList={todoList} setTodoList={setTodoList}/>\r\n            </div>\r\n            {todoList.map(task => (\r\n                <div key={task.id} className=\"task-item\">\r\n                    <div style={{ width: '100%', height: '100%' }} className=\"task-content\">\r\n                        <h2 className=\"task-title\"> Title: {task.title}</h2>\r\n                        <div className=\"task-process\">\r\n                            <span>\r\n                                <p className=\"task-status completed\"> {task.status ? \"Completed\" : \"In Progress\"} </p>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"task-content\">\r\n                        <div style={{ width: '100%' }}>\r\n                            <p className=\"task-description\">Description: {task.content}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"task-time\">\r\n                        <div className=\"task-due\">Due:\r\n                            <p className=\"task-due-date\" style={{ fontSize: '1rem', fontWeight: '500' }}>{format(new Date(task.due_date), 'dd MMMM yyyy HH:mm')}</p>\r\n                        </div>\r\n                        <p className=\"task-duration\">Thời gian đã thực hiện: {task.actual_duration}h </p>\r\n\r\n                        ({ShowDetail} ? <Detail /> : (<button onClick={handleDetail} className=\"task-detail\">Detail</button>))\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\nexport default Task;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}