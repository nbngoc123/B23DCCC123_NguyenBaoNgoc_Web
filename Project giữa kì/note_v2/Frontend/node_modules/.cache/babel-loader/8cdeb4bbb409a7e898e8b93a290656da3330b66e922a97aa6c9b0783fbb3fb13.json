{"ast":null,"code":"var _jsxFileName = \"D:\\\\Document\\\\test\\\\project-note\\\\src\\\\components\\\\Note\\\\Task\\\\index.js\",\n  _s = $RefreshSig$();\n// import { data } from \"../Data/TodoListData\"\nimport \"./Task.css\";\nimport AddTask from '../../Control/AddTask';\nimport { format } from 'date-fns';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { calculateElapsedTime, calculateRateProcess } from '../../Control/Function/ComputeTime';\nimport Detail from '../../Modal/Detail/Detail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Task() {\n  _s();\n  const [todoList, setTodoList] = useState([]);\n  const length = todoList.length;\n  // console.log(length)\n  const [saved, setSaved] = useState(false);\n  useEffect(() => {\n    // Gọi API lấy danh sách to-do\n    axios.get('http://localhost:3006').then(response => {\n      setTodoList(response.data);\n      console.log(response.data);\n      setTodoList(response.data.map(todoList => ({\n        ...todoList,\n        actual_duration: calculateElapsedTime(todoList),\n        rate_prosess: calculateRateProcess(todoList)\n      })));\n    }).catch(error => console.error(\"Lỗi khi tải dữ liệu:\", error));\n  }, [saved]);\n  const isSaved = () => setSaved(!saved);\n\n  // useEffect(() => {\n  //     console.log('todoList updated:', todoList);\n  // }, [todoList]);\n\n  const handleAddItem = async newItem => {\n    axios.post('http://localhost:3006', newItem).then(response => {\n      // Dòng này sử dụng giá trị hiện tại của todoList (trước khi cập nhật) để thêm newItem vào cuối danh sách.\n      // Tuy nhiên, vì setState trong React là bất đồng bộ, nên khi gọi setTodoList, giá trị todoList có thể chưa được cập nhật ngay lập tức, dẫn đến việc sử dụng todoList cũ nếu có thay đổi trong trạng thái trước đó.\n      // setTodoList(prevTodoList => [...prevTodoList, {...newItem, actual_duration: calculateElapsedTime(newItem)}]);:\n\n      // Dòng này sử dụng hàm callback để lấy giá trị cập nhật mới nhất của todoList (thông qua prevTodoList).\n      // Việc này đảm bảo bạn luôn làm việc với giá trị todoList mới nhất, tránh trường hợp xảy ra lỗi do cập nhật bất đồng bộ.\n      setTodoList(prevTodoList => [...prevTodoList, {\n        ...newItem,\n        actual_duration: calculateElapsedTime(newItem)\n      }]);\n    });\n  };\n  const [showDetail, setShowDetail] = useState(null);\n  const handleDetail = taskId => {\n    setShowDetail(prevId => prevId === taskId ? null : taskId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"note\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-container\",\n      children: /*#__PURE__*/_jsxDEV(AddTask, {\n        handleItem: handleAddItem,\n        todoList: todoList,\n        setTodoList: setTodoList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), todoList.map(task => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-item\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        className: \"task-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"task-title\",\n          children: [\" Title: \", task.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-process\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"task-status `${completed}`\",\n              children: [\" \", task.status ? \"Completed\" : \"In Progress\", \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"task-description\",\n            children: [\"Description: \", task.content]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-time\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-due\",\n          children: [\"Due:\", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"task-due-date\",\n            style: {\n              fontSize: '1rem',\n              fontWeight: '500'\n            },\n            children: format(new Date(task.due_date), 'dd MMMM yyyy HH:mm')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"task-duration\",\n          children: [\"Th\\u1EDDi gian \\u0111\\xE3 th\\u1EF1c hi\\u1EC7n: \", task.actual_duration, \"h \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDetail(task.id),\n          className: \"task-detail\",\n          children: \"Detail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this), showDetail === task.id && /*#__PURE__*/_jsxDEV(Detail, {\n          task: task,\n          handleDetail: () => handleDetail(task.id),\n          HandleCancel: () => setShowDetail(null),\n          isSaved: isSaved\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 52\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)]\n    }, task.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(Task, \"WjNmAWoHV3FVzISLgO9Irz13w6M=\");\n_c = Task;\nexport default Task;\nvar _c;\n$RefreshReg$(_c, \"Task\");","map":{"version":3,"names":["AddTask","format","React","useState","useEffect","axios","calculateElapsedTime","calculateRateProcess","Detail","jsxDEV","_jsxDEV","Task","_s","todoList","setTodoList","length","saved","setSaved","get","then","response","data","console","log","map","actual_duration","rate_prosess","catch","error","isSaved","handleAddItem","newItem","post","prevTodoList","showDetail","setShowDetail","handleDetail","taskId","prevId","className","children","handleItem","fileName","_jsxFileName","lineNumber","columnNumber","task","style","width","height","title","status","content","fontSize","fontWeight","Date","due_date","onClick","id","HandleCancel","_c","$RefreshReg$"],"sources":["D:/Document/test/project-note/src/components/Note/Task/index.js"],"sourcesContent":["// import { data } from \"../Data/TodoListData\"\r\nimport \"./Task.css\";\r\nimport AddTask from '../../Control/AddTask';\r\nimport { format } from 'date-fns';\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {calculateElapsedTime, calculateRateProcess} from '../../Control/Function/ComputeTime';\r\nimport Detail from '../../Modal/Detail/Detail';\r\n\r\nfunction Task() {\r\n    const [todoList, setTodoList] = useState([]);\r\n    const length = todoList.length\r\n    // console.log(length)\r\n    const [saved, setSaved] = useState(false);\r\n    useEffect(() => {\r\n    // Gọi API lấy danh sách to-do\r\n    axios.get('http://localhost:3006')\r\n        .then(response => {\r\n            setTodoList(response.data);\r\n            console.log(response.data)\r\n\r\n            setTodoList(response.data.map(todoList => ({\r\n                    ...todoList,\r\n                    actual_duration: calculateElapsedTime(todoList),\r\n                    rate_prosess: calculateRateProcess(todoList),\r\n            })));\r\n        })\r\n        .catch(error => console.error(\"Lỗi khi tải dữ liệu:\", error));\r\n    }, [saved]);\r\n\r\n    const isSaved = () => setSaved(!saved)\r\n\r\n    // useEffect(() => {\r\n    //     console.log('todoList updated:', todoList);\r\n    // }, [todoList]);\r\n\r\n\r\n\r\n    const handleAddItem = async (newItem) => {\r\n\r\n        axios.post('http://localhost:3006', newItem)\r\n            .then(response => {\r\n\r\n// Dòng này sử dụng giá trị hiện tại của todoList (trước khi cập nhật) để thêm newItem vào cuối danh sách.\r\n// Tuy nhiên, vì setState trong React là bất đồng bộ, nên khi gọi setTodoList, giá trị todoList có thể chưa được cập nhật ngay lập tức, dẫn đến việc sử dụng todoList cũ nếu có thay đổi trong trạng thái trước đó.\r\n// setTodoList(prevTodoList => [...prevTodoList, {...newItem, actual_duration: calculateElapsedTime(newItem)}]);:\r\n\r\n// Dòng này sử dụng hàm callback để lấy giá trị cập nhật mới nhất của todoList (thông qua prevTodoList).\r\n// Việc này đảm bảo bạn luôn làm việc với giá trị todoList mới nhất, tránh trường hợp xảy ra lỗi do cập nhật bất đồng bộ.\r\n                setTodoList(prevTodoList => [...prevTodoList, {...newItem, actual_duration: calculateElapsedTime(newItem)}]);\r\n            })\r\n        \r\n    };\r\n    const [showDetail, setShowDetail] = useState(null);\r\n    const handleDetail = (taskId) => {\r\n        setShowDetail(prevId => (prevId === taskId ? null : taskId));\r\n    };\r\n    return (\r\n        <div className=\"note\">\r\n            <div className=\"note-container\">\r\n                {/* <AddTodoItem onAddItem={handleAddItem} />  */}\r\n                <AddTask handleItem={handleAddItem} todoList={todoList} setTodoList={setTodoList}/>\r\n            </div>\r\n            {todoList.map(task => (\r\n                <div key={task.id} className=\"task-item\">\r\n                    <div style={{ width: '100%', height: '100%' }} className=\"task-content\">\r\n                        <h2 className=\"task-title\"> Title: {task.title}</h2>\r\n                        <div className=\"task-process\">\r\n                            <span>\r\n                                <p className=\"task-status `${completed}`\"> {task.status ? \"Completed\" : \"In Progress\"} </p>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"task-content\">\r\n                        <div style={{ width: '100%' }}>\r\n                            <p className=\"task-description\">Description: {task.content}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"task-time\">\r\n                        <div className=\"task-due\">Due:\r\n                            <p className=\"task-due-date\" style={{ fontSize: '1rem', fontWeight: '500' }}>{format(new Date(task.due_date), 'dd MMMM yyyy HH:mm')}</p>\r\n                        </div>\r\n                        <p className=\"task-duration\">Thời gian đã thực hiện: {task.actual_duration}h </p>\r\n\r\n                        <button onClick={() => handleDetail(task.id)} className=\"task-detail\">Detail</button>\r\n                        {showDetail === task.id && <Detail task={task} handleDetail={() => handleDetail(task.id)} HandleCancel={() => setShowDetail(null)} isSaved={isSaved} />}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\nexport default Task;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}